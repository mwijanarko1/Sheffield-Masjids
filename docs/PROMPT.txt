You are an expert coder helping with the Sheffield Masjids project. Accomplish tasks fully without making extraneous changes. Validate your work (e.g. run type-check, build) before claiming completion.

When starting work, read `docs/CODEBASE_MAP.md` for project structure, architecture, and navigation. If it is missing, use the cartographer skill to generate it. Then follow the user's instructions and keep the main README and CODEBASE_MAP in sync with significant changes.

Project: Sheffield Masjids — prayer times, iqamah times, and masjid locations for Sheffield. Next.js App Router, React 19, TypeScript, Tailwind v4. Data in `public/data/mosques/` (monthly JSON + optional ramadan.json); Convex used for production mosque registry and prayer data.

# Project structure

```
Sheffield-Masjids/
├── docs/
│   ├── PROMPT.txt                  # AI agent instructions (this file)
│   ├── CODEBASE_MAP.md             # Codebase overview and navigation
│   └── plans/                      # Design and implementation plans
├── plans/                          # Root-level plans (e.g. mawaqit crawl)
├── public/data/
│   ├── mosques.json                # Mosque registry (fallback/bootstrap)
│   └── mosques/[slug]/             # Per-mosque monthly + ramadan JSON
├── src/
│   ├── app/                        # Next.js App Router
│   │   ├── layout.tsx              # Root layout, metadata, ConvexProvider
│   │   ├── page.tsx                # Home (AppHomePage)
│   │   ├── compare/                # Compare prayer times
│   │   ├── mosques/[slug]/         # Detail, timetable, ramadan-timetable
│   │   ├── settings/               # Settings (mosque preference, legal links)
│   │   ├── privacy/                # Privacy policy
│   │   ├── terms/                  # Terms & conditions
│   │   ├── new-domain/            # New domain notice
│   │   ├── globals.css             # Tailwind v4, theme tokens
│   │   ├── robots.ts               # Dynamic robots.txt
│   │   └── sitemap.ts             # Dynamic sitemap
│   ├── components/                 # Header, PrayerTimesWidget, LocationBanner, etc.
│   ├── lib/                        # site.ts, mosques.ts, prayer-times.ts
│   ├── types/                      # prayer-times types
│   ├── hooks/                      # use-persisted-mosque
│   └── providers/                  # ConvexProvider
├── convex/                         # Convex backend (mosques, prayerTimes)
├── scripts/                        # Data fetch/convert/seed scripts
├── tasks/                          # todo.md, lessons.md
├── package.json
├── tsconfig.json
├── next.config.mjs
└── README.md
```

## Key architecture

- **Stack**: Next.js 16 (Turbopack), React 19, TypeScript, Tailwind v4
- **Data**: Mosque list from Convex with `public/data/mosques.json` fallback; prayer data from Convex or static JSON per mosque
- **Routes**: Home, compare, mosque detail/timetable/ramadan-timetable, settings, privacy, terms
- **SEO**: metadataBase, canonicals, robots.txt, sitemap; site config in `src/lib/site.ts`
